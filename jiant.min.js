"use strict";(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function($){function getAt(e,a){if(!Array.isArray(e))return 0===a?e:null;let t;return e.some(function(e,n){if(e===jiant.optional&&a++,n===a)return t=e,!0}),t}function setupLookup(e,a,t,n){e[a]=function(){return t.find("."+n+a)}}function loadModule(e,a,t,n,o){const i=extractApplicationId(e);Array.isArray(a)||(a=[a]),boundApps[i]?_loadModules(boundApps[i],a,i,!1,t,n,o):bindingCurrently[i]?_loadModules(bindingCurrently[i],a,i,!1,t,n,o):(t&&(console.error("loadModule called before .app with callback, callback will be ignored. loadModule arguments: "),console.error(arguments)),preApp(i,function(e,t){a.forEach(function(e){t.modules.push(e)})}))}function _loadModules(e,a,t,n,o,i,s){let r=[];o=o||function(){},$.isPlainObject(a)?r=parseObjectModules(a,t):Array.isArray(a)?r=parseArrayModules(a,t):jiant.logError("Unrecognized modules type",a),r.length?(r.forEach(function(e){e.replace=i,e.injectTo=s}),loadModules(e,t,r,n,o)):o()}function executeExternal(e,a,t,n,o){o.css&&o.css.some(function(e){if(addedLibs[e])return!0;if(addedLibs[e]=1,o.cssLoaded[e]){const a=o.cssLoaded[e]+"\r\n/*# sourceURL="+e+" */\r\n";$("<style>").html(a).appendTo("head")}}),o.html&&o.html.forEach(function(e){if(addedLibs[e]=1,o.htmlLoaded[e]){const a="<!-- sourceUrl = "+e+" -->"+o.htmlLoaded[e]+"<!-- end of source from "+e+" -->",i=t[n].injectTo?$(t[n].injectTo):$("body");t[n].replace?i.html(a):i.append($(a))}}),o.js&&o.js.some(function(e){if(addedLibs[e])return!0;if(addedLibs[e]=1,o.jsLoaded[e]){const a=o.jsLoaded[e]+"\r\n//# sourceURL="+e+" \r\n";$.globalEval(a)}}),executeModule(e,a,t,n+1)}function executeModule(e,a,t,n){if(n>=t.length)return void a();const o=t[n],i=o.name,s=modules[i];if("function"==typeof s){const r=[$,e,jiant,o];s.parsedDeps&&s.parsedDeps.forEach(function(a){r.push(e.modules[a])}),s.singleton?e.modules[i]=singletones[i]:(e.modules[i]=s.apply({singleton:function(){s.singleton=!0}},r),s.singleton&&(singletones[i]=e.modules[i])),executeModule(e,a,t,n+1)}else $.isPlainObject(s)?executeExternal(e,a,t,n,s):(jiant.errorp("Application !!. Not loaded module !!. Possible error - wrong modules section, wrong path or module name in js file doesn't match declared in app.modules section. Load initiated by !!",e.id,i,o.j_initiatedBy?o.j_initiatedBy:"appication"),executeModule(e,a,t,n+1))}function cbIf0(){for(let e=0;e<moduleLoads.length;e++){const a=moduleLoads[e];if(cbLoadIf0(a.appRoot,a.modules2load,a.initial,a.cb,a.loading,e)){cbIf0();break}}}function cbLoadIf0(e,a,t,n,o,i){if(0<Object.keys(o).length)return!1;for(const s in a){const e=a[s].name,t=modules[e];if(!t||t.cssCount||t.jsCount||t.htmlCount)return!1}moduleLoads.splice(i,1),t&&(e.modulesSpec=e.modules,e.modules={});const s=[];return a.forEach(function(e){s.push(e)}),s.sort(function(e,a){return nvl(e.order,0)-nvl(a.order,0)}),executeModule(e,n,s,0),!0}function nvl(e,a,t){if(void 0===e||null===e)return a;if(t){const n="function"==typeof e[t]?e[t]():e[t];return void 0===n||null===n?a:n}return e}function addIfNeed(e,a){let t=!1;e.some(function(e){if(e.name===a.name)return t=!0,e.order=Math.min(e.order,a.order),!0}),t||e.push(a)}function _loadModule(e,a,t,n,o,i,s){function r(i,r,p){let l=p.path,d=l.lastIndexOf("/")+1,c=l.substring(0,d)+i;c.lastIndexOf("/")===c.length-1||(c+="/");const m="string"==typeof r?{name:r,path:c+r}:r,u=parseObjModule(m.name,m,a,t.length);return p.j_after[u.name]=1,u.order=Math.min(u.order,p.order-.5),u.j_initiatedBy=p.name,addIfNeed(t,u),_loadModule(e,a,t,n,o,u,s),u.name}function p(e,a){"string"==typeof modules[e].deps&&(jiant.errorp("Dependencies for module should be array, not string, error in module: !!, module url: !!",e,d),modules[e].deps=[modules[e].deps]);const t=modules[e].deps,n=modules[e].parsedDeps=[];t&&t.forEach(function(e){"string"==typeof e?n.push(r("",e,a)):$.each(e,function(e,t){Array.isArray(t)||(t=[t]),t.forEach(function(t){n.push(r(e,t,a))})})})}function l(e,a){p(e.name,e),$.isPlainObject(a)&&(preparePath(a,"css"),preparePath(a,"js"),preparePath(a,"html"),loadPath(a,"css"),loadPath(a,"js"),loadPath(a,"html"))}let d;const c=i.name;if(modules[c]||console.info(a+". Loading module "+i.name+", initiated by "+(i.j_initiatedBy?i.j_initiatedBy:"application ")),"string"!=typeof c)return console.error("Wrong module declaration, possibly used array instead of object, moduleSpec:"),void console.error(i);if(!s[c])if(!modules[c]){s[c]=1;const t=("exactUrl"in i);d=t?i.exactUrl:isCouldBePrefixed(i.path)?(e.modulesPrefix||"")+i.path:i.path,t||(d=d+".js"+(e.modulesSuffix||"")),console.info("           module url: "+d),$.ajax({url:d,method:"GET",timeout:e.modulesTimeout||15e3,cache:!0,crossDomain:!0,dataType:"script"}).done(function(){modules[c]&&l(i,modules[c])}).fail(function(){console.error("Application "+a+". Not loaded module "+c)}).always(function(){s[c]&&(delete s[c],cbIf0())})}else l(i,modules[c])}function loadModules(e,a,t,n,o){const i={};moduleLoads.push({appRoot:e,modules2load:t,initial:n,cb:o,loading:i}),t.forEach(function(s){_loadModule(e,a,t,n,o,s,i)}),cbIf0()}function parseArrayModules(e,a){let t=[],n=0;return e.forEach(function(e){"string"==typeof e?t.push(parseObjModule(e,{path:e},a,n)):$.each(e,function(e,o){"string"==typeof o?t.push(parseObjModule(o,{path:e+"/"+o},a,n)):Array.isArray(o)?o.forEach(function(o){"string"==typeof o?t.push(parseObjModule(o,{path:e+"/"+o},a,n)):$.each(o,function(o,i){i.path=i.path||e+"/"+o,t.push(parseObjModule(o,i,a,n)),n++}),n++}):t.push(parseObjModule(e,o,a,n)),n++}),n++}),t}function parseObjectModules(e,a){let t=[],n=0;return $.each(e,function(e,o){"string"==typeof o?t.push(parseObjModule(e,{path:o},a,n)):t.push(parseObjModule(e,o,a,n)),n++}),t}function parseObjModule(e,a,t,n){const o=a.name||e;return"order"in a||(a.order=n),"path"in a||(a.path=e),a.j_after={},a.name=o,a}function preparePath(e,a){e[a]&&(!Array.isArray(e[a])&&(e[a]=[e[a]]),e[a+"Count"]=e[a+"Count"]?e[a+"Count"]+e[a].length:e[a].length,e[a+"Loaded"]={})}function loadPath(e,a){e[a]&&e[a].forEach(function(t){loadedLibs[t]?(e[a+"Loaded"][t]=loadedLibs[t],e[a+"Count"]--,!e.cssCount&&!e.jsCount&&!e.htmlCount&&cbIf0()):loadingLibs[t]?loadingLibs[t].push(function(){e[a+"Loaded"][t]=loadedLibs[t],e[a+"Count"]--,e.cssCount||e.jsCount||e.htmlCount||cbIf0()}):(loadingLibs[t]=[],$.ajax({url:t,timeout:jiant.LIB_LOAD_TIMEOUT,method:"GET",cache:!0,crossDomain:!0,dataType:"text"}).done(function(n){e[a+"Loaded"][t]=n,loadedLibs[t]=n;const o=loadingLibs[t];delete loadingLibs[t],o.forEach(function(e){e()})}).always(function(){e[a+"Count"]--,e.cssCount||e.jsCount||e.htmlCount||cbIf0()}))})}function module(e,a,t){3>arguments.length&&(t=a,a=[]),modules[e]||(modules[e]=t,modules[e].deps=a,console.info("registered module "+e))}function isCouldBePrefixed(e){return"/"!==e.substring(0,1)&&"http://"!==e.substring(0,7)&&"https://"!==e.substring(0,8)}function maybeSetDevModeFromQueryString(){0<=(window.location+"").toLowerCase().indexOf("jiant.dev_mode")&&(jiant.DEV_MODE=!0)}function maybeShort(e,a,t){return e[a]?(e[t]||(e[t]=e[a]),!0):e[t]?(e[a]=e[t],!0):(e[a]={},!1)}function bindTree(e,a){return _bindUi(e,a),a}function _bindUi(e,a){const t={id:e.id+"_JLoader",modules:["jiant-log","jiant-util"],modulesPrefix:jiantPath};String.prototype.startsWith&&String.prototype.endsWith||t.modules.push("jiant-poly"),["intl","views","templates","ajax","events","semaphores","states","models","logic"].forEach(function(e){(e in a||"intl"===e&&"logic"in a&&e in a.logic)&&t.modules.push("jiant-"+e)}),__bindUi(t,t),onApp(t,function(){__bindUi(e,a,t)})}function __bindUi(e,a,t){maybeSetDevModeFromQueryString();const n=e.id?e.id:"no_app_id";return e.id||jiant.logError("!!! Application id not specified. Not recommended since 0.20. Use 'id' property of application root to specify application id"),boundApps[n]&&e===a?void jiant.logError("Application '"+n+"' already loaded, skipping multiple bind call"):void(maybeShort(a,"logic","l"),maybeShort(a,"intl","i"),maybeShort(a,"views","v"),maybeShort(a,"templates","t"),maybeShort(a,"ajax","a"),maybeShort(a,"events","e"),maybeShort(a,"semaphores","sem"),maybeShort(a,"states","s"),maybeShort(a,"models","m"),a.modules=a.modules||[],e===a&&(preApping[n]=e,pre[n]&&(pre[n].forEach(function(a){a($,e,jiant)}),delete pre[n]),"*"!==n&&pre["*"]&&pre["*"].forEach(function(a){a($,e,jiant)}),delete preApping[n],bindingCurrently[n]=e),a.modulesSpec&&(a.modules=a.modulesSpec),_loadModules(e,a.modules,n,!0,function(){t&&$.each(t.modules,function(t,n){"apply"in n&&n.apply(e,a)}),e===a&&(boundApps[n]=e,console.info(n+" bound"),"jiant-logic"in singletones&&singletones["jiant-logic"].afterBind(n),delete bindingCurrently[n],eventBus.trigger(appBoundEventName(n))),t&&delete boundApps[t.id]}))}function app(e){bindUi(e.appPrefix,e,void 0,e.viewsUrl,e.injectId)}function bindUi(e,a,t,n,o){if($.isPlainObject(e)&&(o=n,n=t,t=a,a=e,e=a.appPrefix),a.appPrefix=e||"",void 0===t&&(t=!0),"string"!=typeof n&&(n=void 0),"string"!=typeof o&&(o=void 0),"boolean"!=typeof t&&(t=void 0),n){let e;o?(e=$("#"+o),!e[0]&&(e=$("<div id='"+o+"' style='display:none'></div>"),$("body").append(e))):e=$("body"),e.load(n,null,function(){_bindUi(a,a)})}else _bindUi(a,a)}function extractApplicationId(e){return $.isPlainObject(e)?e.id:e}function onApp(e,a,t){t||a?!t&&(t=a,a=[]):(jiant.error("!!! Registering anonymous logic without application id. Not recommended since 0.20"),t=e,e=["no_app_id"]),Array.isArray(e)||(e=[e]),1<e.length&&Array.isArray(a)&&0<a.length?a.forEach(function(e){Array.isArray(e)||jiant.error("Used multiple applications onApp and supplied wrong dependency list, use multi-array, like [[app1DepList], [app2DepList]]")}):1===e.length&&a&&a.length?a=[a]:!a&&(a=[]),e.forEach(function(n,o){void 0===n||null===n?jiant.logError("Called onApp with undefined application, apps array is ",e):$.isPlainObject(n)&&(n=n.id,e[o]=n),a[o]&&0<a[o].length&&jiant.loadModule(n,"jiant-logic",function(){singletones["jiant-logic"].beforeBind(n,a[o],t)})}),handleBoundArr(e,t)}function preApp(e,a){if("string"!=typeof e)jiant.errorp("preApp first parameter must be application id string, got !!",typeof e);else if(boundApps[e])jiant.errorp("Application !! already bound, preApp should be called before bindUi",e);else if(bindingCurrently[e])jiant.errorp("Application !! binding in progress, preApp should be called before bindUi",e);else{const t=pre[e]=nvl(pre[e],[]);t.push(a),preApping[e]&&a($,preApping[e],jiant)}}function handleBoundArr(e,a){let t=!0;if(e.some(function(n){if(!boundApps[n])return eventBus.one(appBoundEventName(n),function(){handleBoundArr(e,a)}),t=!1,!0}),t){let t=!0,n=[$];e.some(function(o){return"jiant-logic"in singletones&&(t=singletones["jiant-logic"].isDependResolved(o,{depCb:a,callCb:function(){handleBoundArr(e,a)}})),!t||void n.push(boundApps[o])}),t&&a.apply(a,n)}}function appBoundEventName(e){return e+"jiant_uiBound_"+e}function optional(e){return Array.isArray(e)?[optional,...e]:[optional,e]}function fn(e){return[fn,e]}function comp(e,a){return[comp,e,a]}function data(e,a){return 0===arguments.length?data:[data,e,a]}function cssMarker(e,a){return 0===arguments.length?cssMarker:[cssMarker,e,a]}function cssFlag(e,a){return 0===arguments.length?cssFlag:[cssFlag,e,a]}function meta(){const e=[meta,...arguments];return 0===arguments.length?meta:e}function version(){return 401}function Jiant(){}const jsrc=document.currentScript.src,j2s="jiant.js",jiantPath=jsrc.substring(0,jsrc.indexOf("jiant.js")),addedLibs={},loadedLibs={},loadingLibs={},moduleLoads=[],modules={},singletones={},eventBus=$({}),preApping={},boundApps={},bindingCurrently={},pre={};return Jiant.prototype={AJAX_PREFIX:"",AJAX_SUFFIX:"",DEV_MODE:!1,ADD_TM_TAGS:!0,PAGER_RADIUS:6,LIB_LOAD_TIMEOUT:15e3,isMSIE:eval("/*@cc_on!@*/!1"),STATE_EXTERNAL_BASE:void 0,extractApplicationId:extractApplicationId,setupLookup:setupLookup,bindUi:bindUi,app:app,module:module,loadModule:loadModule,onUiBound:onApp,onApp:onApp,preUiBound:preApp,preApp:preApp,bindTree:bindTree,version:version,nvl:nvl,getApps:function(){return boundApps},getAt:getAt,optional:optional,comp:comp,meta:meta,cssFlag:cssFlag,cssMarker:cssMarker,fn:fn,data:data,lookup:function(){},transientFn:function(){},collection:"jiant.collection",container:"jiant.container",containerPaged:"jiant.containerPaged",ctl:"jiant.ctl",ctlHide:"jiant.ctlHide",form:"jiant.form",grid:"jiant.grid",image:"jiant.image",imgBg:"jiant.imgBg",input:"jiant.input",href:"jiant.href",inputSet:"jiant.inputSet",inputSetAsString:"jiant.inputSetAsString",inputDate:"jiant.inputDate",inputInt:"jiant.inputInt",inputFloat:"jiant.inputFloat",label:"jiant.label",nlabel:"jiant.nlabel",pager:"jiant.pager",slider:"jiant.slider",tabs:"jiant.tabs",numLabel:"jiant.numLabel",et:{ctl2state:"jiant.ctl2state",ctl2root:"jiant.ctl2root",ctlBack:"jiant.ctlBack"},flags:{},intro:{},key:{left:37,up:38,right:39,down:40,del:46,backspace:8,tab:9,end:35,home:36,enter:13,ctrl:17,escape:27,dot:190,dotExtra:110,comma:188,a:65,c:67,u:85,w:87,space:32,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120}},window.jiant||(window.jiant=new Jiant)});jiant.module("jiant-models",["jiant-util"],function(e,a,t,n,o){function i(a){return a[y]&&e.isPlainObject(a[y])?a[y]:a}function s(a,n){function s(a){let t=!1;return e.each(T,function(n,o){if(o.length===a.length){let n=!0;if(e.each(o,function(e,t){n=n&&t===a[e]}),n)return t=!0,!1}}),t}function g(a){const t=C.indexOf(a);0>t||e.each(T,function(t,n){let o=N;e.each(n,function(e,t){const n=t+"="+a[t]();o[n]=o[n]||{},o=o[n]}),o.content=o.content||[],o.content.push(a),a[w].push(o.content)})}function j(a){e.each(a[w],function(e,t){t.splice(t.indexOf(a),1)}),a[w]=[]}function b(e){j(e),g(e)}function _(e,a){return 0===e.indexOf("findBy")&&6<e.length&&d(e,6)&&o.isEmptyFunction(a)}function x(e,a,t,n){e[v(a)]&&e.trigger(v(a),t),e[v()]&&e.trigger(v(),n)}function I(e){return function(){return R[e].apply(R,arguments)}}function v(e){return e=e||"",a+"_"+e+"_event"}function k(e){e.enqueue=function(e,a){function t(){const t=o[e]();return(null===t||void 0===t)&&(n&&n.off(),o[e](a),!0)}let n,o=this;t()||(n=this[e+"_on"](t))},e.nowAndOn=function(e,a){return a.apply(this,[this,this[e]()]),this.on(e,a)},e.asapAndOn=function(e,a){const t=this;t.asap(e,function(){a.apply(t,arguments),t.on(e,a)})},e.asap=function(e,a){const t=this[f],n=this[e]();if(void 0!==n)a&&a.apply(this,[this,n]);else{const n=v(e),o=this;t[n]=(t[n]||0)+1,t.one(n,function(){t[n]--;const e=[...arguments];e.splice(0,1),a&&a.apply(o,e)})}}}function A(a,t){a.on=function(e,a){"function"==typeof e&&(a=e,e=t);const n=this,o=this[f],i=v(e),s=function(e){const t=[...arguments];t.splice(0,1);const n=a&&a.apply(a,t);!1===n&&e.stopImmediatePropagation()};return o.handlers=o.handlers||{},o.handlers[i]=o.handlers[e]||[],o.handlers[i].push(a),o[i]=(o[i]||0)+1,o.on(i,s),s.off=function(){n.off(s)},s.eventName=i,s.cb=a,s},a.once=function(e,a){"function"==typeof e&&(a=e,e=t);const n=this,o=n.on(e,function(){n.off(o),a&&a.apply(n,arguments)})},a.off=function(a){const t=this[f];a=Array.isArray(a)?a:[a],e.each(a,function(e,a){return t[a.eventName]--,t.handlers[a.eventName].splice(t.handlers[a.eventName].indexOf(a.cb),1),t.off(a.eventName,a)})},a.subscribers=function(e){const a=this[f],t=v(e);return a.handlers?a.handlers[t]:void 0}}function E(i,l,g){let j;const b=P&&i!==n[y];if(l===O&&e.isPlainObject(g));else if(l===y&&e.isPlainObject(g));else if("addAll"===l)alert("JIANT: Model function 'addAll' removed since 1.37, use previous versions or replace it by 'add'");else if(!b&&l in{updateAll:1,add:1,toCollection:1,all:1});else if(l in{off:1,nowAndOn:1,asapAndOn:1,asap:1,once:1,enqueue:1})M.push(l);else if("on"===l)M.push(l),n[l]=I(l),A(F.prototype),k(F.prototype),A(n);else if("update"===l)M.push(l),n[l]=I(l),F.prototype[l]=function(a,t){let n=!1,o={},i=this;0===arguments.length?n=!0:(t&&e.each(this[S],function(e){e in a||(a[e]=void 0)}),e.each(a,function(e,a){if(c(i[e])){a="function"==typeof a?a():a;const t=i[e]();t!==a&&(o[e]=t,i[e](a,!1),n=!0)}}),e.each(o,function(e,a){i[e](i[e](),!0,!1,a)})),n&&(x(this[f],l,[this],[this,l]),x(B,l,[this],[this,l]))};else if("remove"===l);else if(0===l.indexOf("sum")&&3<l.length&&d(l,3)&&!b)j=l.substring(3).split("And"),D[l]=function(){function a(a,t){let n;return e.each(a,function(e,a){if(a[t]&&"function"==typeof a[t]){const e=a[t]();n=void 0===n?e:void 0===e?void 0:n+e}}),n}let t;return e.each(j,function(e,n){const o=n.substring(0,1).toLowerCase()+n.substring(1),i=a(C,o);t=void 0===t?i:void 0===i?void 0:t+i}),t};else if("filter"===l&&!b)D[l]=function(a){const t=[];return e.each(D.all(),function(e,n){a(n)&&t.push(n)}),new L(t)};else if(_(l,g)&&!b)D[l]=function(){return D["listBy"+l.substring(6)].apply(D,arguments)[0]};else if(0===l.indexOf("listBy")&&6<l.length&&d(l,6)&&!b&&o.isEmptyFunction(g)){const o=l.substring(6).split("And"),p={};let d=!1;e.each(o,function(e,i){i.endsWith("In")&&!n[r(i)]&&(i=i.substring(0,i.length-2),p[r(i)]=!0,d=!0),o[e]=r(i),n[o[e]]||t.errorp("Non existing field used by model method !!, field name: !!, model name: !!",l,o[e],a)}),s(o)||T.push(o),D[l]=function(){let a=N,t=arguments;if(!d)return e.each(o,function(e,n){const o=n+"="+t[e];if(a=a[o],void 0===a)return!1}),new L(void 0===a?[]:a.content);else{let a=[N];e.each(o,function(n,o){const i=[];t[n]=p[o]&&Array.isArray(t[n])?t[n]:[t[n]],e.each(t[n],function(t,n){const s=o+"="+n;e.each(a,function(e,a){void 0!==a[s]&&i.push(a[s])})}),a=i});const n=[];return e.each(a,function(a,t){e.each(t.content,function(a,t){0>e.inArray(n,t)&&n.push(t)})}),new L(n)}}}else if(0===l.indexOf("set")&&3<l.length&&d(l,3))M.push(l),n[l]=I(l),j=l.substring(3).split("And"),F.prototype[l]=function(){const a=arguments,t={};return e.each(j,function(e,n){const o=n.substring(0,1).toLowerCase()+n.substring(1);t[o]=a[e]}),this.update(t),this};else if("reset"===l)M.push(l),n[l]=I(l),F.prototype[l]=function(a){const t=this;e.each(this,function(e,n){c(n)&&t[e](a,!0)})};else if("asMap"===l)M.push(l),n[l]=I(l),F.prototype[l]=function(a,t){function n(a,n,i){u(n)?a[i]=n.asMap(null,t):e.isPlainObject(n)?a[i]=o(n):void 0!==n&&(a[i]=n)}function o(a){const t={};return e.each(a,function(e,a){n(t,a,e)}),t}const i={},s=this;return e.each(s,function(e){const t=a&&a[e]?a[e]:e,o=s[t];if(c(o)||m(o)){const e=o.apply(s);n(i,e,t,a)}}),i};else if((c(g)||o.isEmptyFunction(g))&&!p(l)&&(b||!P)){const e=g===t.transientFn;M.push(l),M.push(l+"_on"),M.push(l+"_once"),M.push(l+"_off"),M.push(l+"_asap"),M.push(l+"_nowAndOn"),M.push(l+"_asapAndOn"),M.push(l+"_enqueue"),F.prototype[l]=function(e,a,t,n){if(0!==arguments.length)if(a||this[S][l]!==e&&!1!==a){const a=4===arguments.length?n:this[S][l];this[S][l]=e,t||(x(this[f],l,[this,e,a],[this,l,e,a]),x(B,l,[this,e,a],[this,l,e,a]))}else this[S][l]=e;return this[S][l]},F.prototype[l].jiant_accessor=1,F.prototype[l].transient_fn=e,n[l]=I(l),n[l].on=function(e){return n.on(l,e)},n[l].once=function(e){return n.once(l,e)},n[l].off=function(e){return n.off(e)},n[l].asap=function(e){return R.asap(l,e)},n[l].nowAndOn=function(e){return R.nowAndOn(l,e)},n[l].asapAndOn=function(e){return R.asapAndOn(l,e)},n[l].enqueue=function(e){return R.enqueue(l,e)},n[l+"_on"]=function(e){return n.on(l,e)},n[l+"_once"]=function(e){return n.once(l,e)},n[l+"_off"]=function(e){return n.off(e)},n[l+"_asap"]=function(e){return R.asap(l,e)},n[l+"_nowAndOn"]=function(e){return R.nowAndOn(l,e)},n[l+"_asapAndOn"]=function(e){return R.asapAndOn(l,e)},n[l+"_enqueue"]=function(e){return R.enqueue(l,e)},F.prototype[l+"_on"]=function(e){return this.on(l,e)},F.prototype[l+"_once"]=function(e){return this.once(l,e)},F.prototype[l+"_off"]=function(e){return this.off(e)},F.prototype[l+"_asap"]=function(e){return this.asap(l,e)},F.prototype[l+"_nowAndOn"]=function(e){return this.nowAndOn(l,e)},F.prototype[l+"_asapAndOn"]=function(e){return this.asapAndOn(l,e)},F.prototype[l+"_enqueue"]=function(e){return this.enqueue(l,e)},n[l].jiant_accessor=1,n[l].transient_fn=e}else if(p(l));else l!==S&&l!==f&&"function"==typeof g&&(b||!P)&&(M.push(l),n[l]=I(l),F.prototype[l]=g,h(g)&&(F.prototype[l].jiant_supplier=1,n[l].jiant_supplier=1))}let C=[],M=[],S="jModelStorage",w="jReverseIndexes",O="jDefaults",T=[],N={},P=n[y]&&e.isPlainObject(n[y]),D=i(n),F=function(){this[S]={},this[f]=e({}),this[w]=[]},L=function(a){if(a){const t=this;e.each(a,function(e,a){t.push(a)})}},B=e({}),R=new F;return F.prototype.jModelName=a,t.DEV_MODE&&!n[y]&&t.infop("Model !! uses deprecated model repository format, switch to new, with model.jRepo = {} section",a),n.jDefaults=n.jDefaults||{},e.each(["updateAll","add","all","remove","filter","toCollection"],function(e,a){D[a]=D[a]||function(){}}),e.each(["on","once","off","update","reset","remove","asMap"],function(e,a){n[a]=n[a]||function(){}}),n.id&&(D.findById=D.findById||function(){}),e.each(D,function(e,a){if(_(e,a)){const t="listBy"+e.substring(6);D[t]||(D[t]=a),D[t+"In"]||(D[t]=a,D[t+"In"]=a)}}),P&&e.each(D,function(e,a){E(D,e,a)}),e.each(n,function(e,a){E(n,e,a)}),n.asap=I("asap"),n.nowAndOn=I("nowAndOn"),n.asapAndOn=I("asapAndOn"),n[f]=B,M.push("remove"),F.prototype.remove=function(){D.remove(this)},D.remove=function(a){const t=C.length;return C=e.grep(C,function(e){return e!==a}),j(a),C.length!==t&&(a[f].trigger(v("remove"),[a]),a[f].trigger(v(),[a,"remove"]),B.trigger(v("remove"),[a]),B.trigger(v(),[a,"remove"])),a},D.remove[f]=B,A(D.remove,"remove"),D.add=function(a){const t=new L;return void 0!==a&&null!==a&&(a=Array.isArray(a)?a:[a],0!==a.length&&(e.each(a,function(a,o){const i=e.extend({},n[O],o),s=new F;C.push(s),t.push(s),e.each(i,function(e,a){n[O][e]&&(a="function"==typeof a?a(i):a),c(s[e])&&(a=c(a)?a.apply(o):a,s[S][e]=a)}),g(s),e.each(i,function(e){c(s[e])&&s[e](s[e](),!0,!1,void 0)})}),e.each(t,function(e,a){a.on(function(e,t){"remove"===t?j(a):b(a)})}),x(B,"add",[t],[t]),(B[v("update")]||B[v()])&&e.each(t,function(e,a){x(B,"update",[a],[a,"update"])}))),t},D.add[f]=B,A(D.add,"add"),D.all=function(){return new L(C)},D.toCollection=function(e){return new L(e)},D.updateAll=function(a,t,n){a=Array.isArray(a)?a:a?[a]:[],n=n?n:function(e,a){return!!e.id&&e.id()===a.id};const o=[],i=[];e.each(a,function(e,a){i.push(a)}),e.each(C,function(s,r){let p;e.each(a,function(e,a){return!n(r,a)||(p=a,!1)});const l=i.indexOf(p);t&&!p&&o.push(r),p&&0<=s&&i.splice(l,1),p&&r.update(p)}),t&&e.each(o,function(e,a){D.remove(a)}),0<i.length&&D.add(i)},e.each(n.jDefaults,function(e,a){a="function"==typeof a?a(n):a,c(n[e])&&n[e](a)}),L.prototype=[],L.prototype.jCollection=!0,L.prototype.jModelName=a,F.prototype.jModelName=a,l(L.prototype,M),n}function r(e){return e.substring(0,1).toLowerCase()+e.substring(1)}function p(e){function a(e,a){return e.length>a.length&&e.indexOf(a)===e.length-a.length}return a(e,"_on")||a(e,"_once")||a(e,"_off")||a(e,"_asap")||a(e,"_nowAndOn")||a(e,"_asapAndOn")}function l(a,t){return e.each(t,function(t,n){a[n]=function(){const a=[],t=arguments;return e.each(this,function(e,o){a.push(o[n].apply(o,t))}),p(n)&&(a.off=function(){e.each(a,function(e,a){a.off()})}),a}}),a}function d(e,a){const t=e.substring(a,a+1);return t!==t.toLowerCase()}function c(e){return e&&e.jiant_accessor&&"function"==typeof e}function m(e){return e&&e.jiant_supplier&&"function"==typeof e}function u(e){return!!e&&!!e[f]}function h(e){const a=(""+e).replace(/\s/g,"");return 0===a.indexOf("function(){return")}function g(a,t){e.each(t,function(e,a){s(e,a)})}this.singleton();const f="jModelObjectBus",y="jRepo";return t.bindModel=s,t.isModelSupplier=m,t.isModelAccessor=c,t.isModel=u,t.getRepo=i,t.isTransient=function(e){return e.transient_fn},{apply:function(e,a){g(e,a.models)}}});jiant.module("jiant-poly",function(){return this.singleton(),String.prototype.startsWith||(String.prototype.startsWith=function(e,a){return a=a||0,this.indexOf(e,a)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),{}});jiant.module("jiant-semaphores",function(){function e(e,t){$.each(t,function(e,t){a(t)})}function a(e){const a=$({});return e.release=function(){e.released=!0,e.releasedArgs=arguments,a.trigger("sem.semaphore",arguments)},e.on=function(t){e.released?t&&t.apply(t,e.releasedArgs):a.on("sem.semaphore",function(){const e=[...arguments];e.splice(0,1),t&&t.apply(t,e)})},e}return this.singleton(),jiant.bindSemaphore=a,{apply:function(a,t){e(a,t.semaphores)}}});jiant.module("jiant-states",function(){function e(e){return function(a,t,n){if(n&&n!==e)return;let o=location.hash.substring(1),r=s(e),p=r.now[0],l=r.now,d=t||u[e]!==i(e);d&&(l.splice(0,1),l.forEach(function(e,a){"undefined"===e&&(l[a]=void 0)}),void 0!==c[e]&&c[e]!==p&&j.trigger(e+"state_"+c[e]+"_end"),c[e]=p,u[e]=i(e),p=p?p:"",!m[e+p]&&(m[e+p]=1),j.trigger(e+"state_"+p+"_start",l))}}function a(e,a,o,i,p,l,d){const c=o.jDefaults;return function(){const o=s(p),m=o.now;if(o.now=[e],[...arguments].forEach(function(a,n){void 0===a?(m[0]===e||t(p,m[0],e))&&void 0!==m[n+1]?o.now.push(r(m[n+1])):n<d.length&&c&&d[n]in c?o.now.push(c[d[n]]):o.now.push(r(a)):o.now.push(r(a))}),m&&(m[0]===e||t(p,m[0],e)))for(let e=arguments.length+1;e<m.length;)e<o.now.length?void 0===o.now[e]&&(o.now[e]=r(m[e])):o.now.push(r(m[e])),e++;if(c)for(let e=arguments.length;e<d.length;e++)d[e]in c&&void 0===o.now[e]&&(e<o.now.length?o.now[e]=c[d[e]]:o.now.push(c[d[e]]));a?(o.root=[],o.now.forEach(function(e){o.root.push(e)})):o.root.forEach(function(e,a){o.root[a]=r(e)}),n(o,i,p,l)}}function t(e,a,t){const n=jiant.getApps()[e].states;return n[a]&&n[t]&&void 0!==n[a].statesGroup&&n[a].statesGroup===n[t].statesGroup}function n(e,a,t,n){let i=o(),r="";const p=e.now+"|"+e.root;$.each(i,function(e,a){r+=t===e?e+"="+p+"=":e+"="+a+"="}),i[t]||(r+=t+"="+p+"=");const s=a||""===a?a:jiant.STATE_EXTERNAL_BASE;n?window.location.assign((s?s:"")+"#"+r):window.location.replace((s?s:"")+"#"+r),$(window).hashchange()}function o(){const e=location.hash.substring(1),a=e.split("="),t={};return a.forEach(function(e,n){0==n%2&&e&&void 0!==a[n+1]&&(t[e]=a[n+1])}),t}function i(e){if(e){const a=o()[e];return void 0===a?"":a}else{let e="";return $.each(o(),function(a,t){return e=t,!1}),e}}function s(e){const a=i(e),t=a.split("|"),n={now:[],root:[]};return t.forEach(function(e,a){const t=e.split(",");t.forEach(function(e){n[0===a?"now":"root"].push(p(e))})}),n.now=n.now||[],n.root=n.root||[],n}function r(e){if($.isPlainObject(e)){let a="{";return $.each(e,function(e,t){a+=r(e),a+=":",a+=r(t),a+="}"}),a="}"===a[a.length-1]?a.substring(0,a.length-1):a,r(a)}return e+="",e?e.replace(h,function(e){return f[e]}):""}function p(e){if(0<=e.indexOf("%")&&0<=navigator.userAgent.toLowerCase().indexOf("firefox")&&(e=decodeURI(e)),e=e?e.replace(g,function(e){return y[e]}):"",e&&"{"===e[0]){const a={},t=e.substring(1,e.length).split("}");return $.each(t,function(e,t){const n=t.split(":");2===n.length&&(a[p(n[0])]=p(n[1]))}),a}return"undefined"===e?void 0:jiant.isNumberString(e)?parseInt(e):e}function l(a,t){if(Object.keys(t).length){if(!$(window).hashchange){return jiant.logError("No hashchange plugin and states configured. Don't use states or add hashchange plugin (supplied with jiant)"),void(jiant.DEV_MODE&&alert("No hashchange plugin and states configured. Don't use states or add hashchange plugin (supplied with jiant)"))}t[""]||(t[""]={}),$.each(t,function(e,t){d(a,e,t)}),$(window).hashchange(e(a.id)),c[a.id]=s(a.id).now[0],u[a.id]=i(a.id)}}function d(e,t,n){const o=n.go?jiant.getParamNames(n.go):[];return n.go=a(t,n.root,n,e.stateExternalBase,e.id,!0,o),n.replace=a(t,n.root,n,e.stateExternalBase,e.id,!1,o),n.start=function(a){let n;n=jiant.getStackTrace(),j.on(e.id+"state_"+t+"_start",function(){const e=[...arguments];e.splice(0,1),a&&a.apply(a,e)});const o=s(e.id);if(jiant.getApps()[e.id]&&(""===t&&0===o.now.length||o.now[0]===t)){const e=o.now;e.splice(0,1),a&&a.apply(a,e)}},n.end=function(a){let n;n=jiant.getStackTrace(),j.on(e.id+"state_"+t+"_end",function(){const e=[...arguments];e.splice(0,1),a&&a.apply(a,e)})},n}this.singleton();const c={},m={},u={},h=/[;,=|{}:#]/gi,g=/;;|;1|;2|;3|;4|;5|;6|;7/gi,f={";":";;",",":";1","=":";2","|":";3","{":";4","}":";5",":":";6","#":";7","'":";7"},y={},j=$({});return $.each(f,function(e,a){y[a]=e}),jiant.bindState=d,jiant.refreshState=function(e){$(window).hashchange&&$(window).trigger("hashchange",[!0,jiant.extractApplicationId(e)])},jiant.getCurrentState=function(e){$.isPlainObject(e)&&(e=e.id);const a=s(e);return a.now[0]?a.now[0]:""},jiant.packForState=r,jiant.unpackForState=p,jiant.goRoot=function(e){function a(e){const a=s(e);a.now=[],a.root.forEach(function(e,t){a.now.push(r(e)),a.root[t]=r(e)}),n(a,void 0,e,!0)}if(e){const t=jiant.extractApplicationId(e);a(t)}else $.each(o(),function(e){a(e)})},{apply:function(e,a){l(e,a.states)}}});jiant.module("jiant-templates",["jiant-uifactory","jiant-ui","jiant-comp","jiant-fields"],function(e,a,t,n,o,i,s,r){function p(a,t){const n=a.find("*"),o=a.filter("*");e.each(e.merge(o,n),function(e,a){if("function"==typeof a.className.split&&0<a.className.length){const e=a.className.split(" ");e.forEach(function(e){t[e]=t[e]||[],t[e].push(a)})}})}function l(a,t){const n=a.find("*"),o=a.filter("*");e.each(e.merge(o,n),function(e,a){const n=a.tagName.toLowerCase();t[n]=t[n]||[],t[n].push(a)})}function d(a,n){u="",e.each(n,function(e,t){c(a,e,t,null,[u])}),t.DEV_MODE&&0<u.length&&alert("Some templates not bound to HTML properly, check console "+u)}function c(a,n,d,c,u){const h="appPrefix"in d?d.appPrefix:a.appPrefix;c=c||o.view(h,n,d,a.bindByTag),d._jiantSpec={},d._jiantType=m,"_scan"in d&&i.scanForSpec(h,d,c);const g={};return e.each(d,function(e,p){const l=i.getComponentType(p);if(g[e]=l,!(e in{appPrefix:1,impl:1,compCbSet:1,_jiantSpec:1,_jiantType:1,_scan:1,jInit:1,_j:1,customRenderer:1}))if(d._jiantSpec[e]=l,l===t.lookup)t.logInfo("    loookup element, no checks/bindings: "+e);else if(l===t.meta);else if(l===t.data)d[e]={jiant_data:1,jiant_data_spec:p},d[e].customRenderer=function(a,t,n,o,i){i[e](n)};else if(l===t.cssMarker||l===t.cssFlag)r.setupCssFlagsMarkers(d,e,l,t.getAt(p,1),t.getAt(p,2));else if(l===t.fn);else{const r=o.viewComponent(c,n,h,e,l,a.bindByTag);if(u[0]+=o.ensureExists(h,a.dirtyList,r,h+n,h+e,i.isFlagPresent(p,t.optional)),d[e]={},l===t.comp){const o=t.getAt(p,1);d[e].customRenderer=s.getCompRenderer(a,o,e,p),o in a.templates||t.error("jiant.comp element refers to non-existing template name: "+o+", tm.elem "+n+"."+e)}}}),u[0]+=o.ensureExists(h,a.dirtyList,c,h+n),d.templateSource=function(){return c.html().trim()},d.parseTemplate=function(o,s,m,u){function f(t){const n=h+t in j?e(j[h+t]):null,o=t in b?e(b[t.toLowerCase()]):null,i=a.bindByTag;return i?"after-class"===i?n||o:"before-class"===i?o||n:o:n}const y=e("<!-- -->"+t._parseTemplate(c,o,n,u));y._jiantSpec=d._jiantSpec,y._j={};const j={},b={};return a.bindByTag&&"after-class"!==a.bindByTag&&"before-class"!==a.bindByTag||p(y,j),!a.bindByTag||l(y,b),e.each(d,function(e,o){if(!i.isServiceName(e)){const s=i.getComponentType(o);s===t.lookup?(t.info("    loookup element, no checks/bindings: "+e),t.setupLookup(y,e,y,h)):s===t.meta||(s.jiant_data?r.setupDataFunction(y,d,e,t.getAt(o.jiant_data_spec,1),t.getAt(o.jiant_data_spec,2)):g[e]===t.cssMarker||g[e]===t.cssFlag||(s===t.fn?y[e]=o[1]:!(e in{parseTemplate:1,parseTemplate2Text:1,templateSource:1,appPrefix:1,impl:1,compCbSet:1,_jiantSpec:1,_scan:1,_j:1,_jiantType:1,jInit:1})&&(y[e]=f(e),y[e]&&(r.setupExtras(a,y[e],d._jiantSpec[e],n,e,y,h),y[e]._j={parent:y}))))}}),y.splice(0,1),i.makePropagationFunction(n,d,y),d.jInit&&"function"==typeof d.jInit&&d.jInit.call(y,a),o&&y.propagate(o,!!s,!!m,u),(!("ADD_TM_TAGS"in t)||t.ADD_TM_TAGS)&&y.addClass("jianttm_"+n),y},d.parseTemplate2Text=function(e,a){return this.parseTemplate(c,e,n,a)},d}this.singleton();const m={};let u;return t.bindTemplate=c,t.intro.isTemplate=function(e){return e&&e._jiantType===m},{apply:function(e,a){d(e,a.templates)}}});jiant.module("jiant-ui",["jiant-fields"],function(e,a,t,n,o){function i(e,a,t){const n=t[0].getElementsByTagName("*");for(const i of n)for(const t of i.className.split(/\s+/))if(t.startsWith(e)){const n=t.substring(e.length);n in a||(a[n]=o.getAutoType(i,n))}}function s(e,a,t,n,o,i,s){const r=e._j.parent._j,p="function"==typeof t;let l=!0;r[a]=r[a]||[],!p&&t.startsWith("!")&&(t=t.substr(1),l=!1);const d={el:e,fld:t,dir:l,fn:p};n&&(d.cls=o),i&&(d.exactVal=s),r[a].push(d)}function r(e,a,t){a.attr("href",t?t:"")}function p(e,a,t){a.css("background-image",t?"url(\""+t+"\")":"")}function l(a,t,n){t&&t[0]&&e.each(t,function(a,t){t=e(t);let o=t.val()===n+"";!o&&Array.isArray(n)&&n.forEach(function(e){if(e+""==t.val()+"")return o=!0,!1}),t.prop("checked",o)})}function d(e){return t.getAt(e,0)}function c(a,t,n){if(t&&t[0]){const a=t[0].tagName.toLowerCase();if(a in{input:1,textarea:1,select:1}){const a=e(t[0]),o=a.attr("type");"checkbox"===o?t.prop("checked",!!n):"radio"===o?t.forEach(function(a){e(a).prop("checked",a.value===n+"")}):void 0===n||null===n?t.val(n):t.val(n+"")}else"img"===a?t.attr("src",n):t.html(void 0===n?"":n)}}function m(a,n){return n=d(n),a&&a.customRenderer&&"function"==typeof a.customRenderer?a.customRenderer:h[n]?h[n]:n===t.inputSet?l:n===t.href?r:n===t.imgBg?p:n===t.inputSetAsString?function(a,t,n,o,i){l(a,t,n?Array.isArray(n)?n:e.isNumeric(n)?[n]:(""+n).split(","):[n],o,i)}:c}function u(e){return 0<=g.indexOf(e)}this.singleton();const h={},g=["parseTemplate","parseTemplate2Text","propagate","customRenderer","jMapping","jMapped","_jiantSpec"];return e.fn.extend({showOn:function(e,a){s(this,"showing",e,!1,void 0,1<arguments.length,a)},hideOn:function(e,a){"function"==typeof e?this.showOn(function(){return!e.apply(this,arguments)}):(e=e.startsWith("!")?e.substr(1):"!"+e,1<arguments.length?this.showOn(e,a):this.showOn(e))},switchClassOn:function(e,a,t){s(this,"switchClass",a,!0,e,1<arguments.length,t)}}),t.registerCustomRenderer=function(e,a){"string"==typeof e||e instanceof String||alert("Custom renderer name should be string"),h[e]=a},{makePropagationFunction:function(a,n,o){const i={};e.each(n,function(e,a){i[e]=a}),n.jMapped&&e.each(n.jMapped,function(e,a){a.forEach(function(e){i[e]=i[e]||1})});const s=function(a,r,p,l){function d(a,t){a._j.showing&&a._j.showing.forEach(function(a){let n;n=a.fn?a.fld.call(t,t):"function"==typeof t[a.fld]?t[a.fld]():t[a.fld],"exactVal"in a&&(n=Array.isArray(a.exactVal)?0<=e.inArray(n,a.exactVal):n===a.exactVal),n=a.dir?n:!n,a.el[n?"show":"hide"]()}),a._j.switchClass&&a._j.switchClass.forEach(function(a){let n;n=a.fn?a.fld.call(t,t):"function"==typeof t[a.fld]?t[a.fld]():t[a.fld],"exactVal"in a&&(n=Array.isArray(a.exactVal)?0<=e.inArray(n,a.exactVal):n===a.exactVal),n=a.dir?n:!n,a.el[n?"addClass":"removeClass"](a.cls)})}const c={subscribe4updates:r,reverseBinding:p,mapping:l};r=void 0===r||r,e.each(i,function(i){let d=l&&l[i]?l[i]:i,g="function"==typeof d?d.apply(a):a[d],f=o._jiantSpec[i];if(n[i]&&n[i].customRenderer||h[f]||n.jMapping&&n.jMapping[i]||a&&void 0!==g&&null!==g&&!u(i)&&!(g instanceof e)){const l="function"==typeof g?g.apply(a):g;[i].concat(n.jMapping&&n.jMapping[i]?n.jMapping[i]:[]).some(function(u){if(u===i&&n.jMapped&&n.jMapped[u])return!0;const h=o[u],f=o._jiantSpec[u],y="_j"+u;if("_jiantSpec"!==u&&m(n[u],f)(a,h,l,!1,o,c),r&&"function"==typeof a.on&&(n[u].customRenderer||"function"==typeof g)){if(s[y]){const e=s[y][0];e&&e.off(s[y][1]),s[y][2]&&h.off&&h.off("change",s[y][2])}"function"!=typeof g&&(d=null);const e=a.on(d,function(e,t){2===arguments.length&&"remove"===t||m(n[u],f)(a,h,t,!0,o,c)});s[y]=[a,e]}if(p&&h&&h.change){const n=function(){function n(e){return"undefined"===e?void 0:e}function i(a){const t=[];return e.each(a,function(a,o){!e(o).prop("checked")||t.push(n(e(o).val()))}),t}function s(e){return 0===e.length||1===e.length&&void 0===e[0]?void 0:e.join()}const r=h[0].tagName.toLowerCase(),p=h.attr("type"),l=o._jiantSpec[u];g&&"function"==typeof g&&(l===t.inputSet?g.call(a,i(h)):l===t.inputSetAsString?g.call(a,s(i(h))):"input"===r&&"checkbox"===p?g.call(a,!!h.prop("checked")):"input"===r&&"radio"===p?g.call(a,s(i(h))):r in{input:1,select:1,textarea:1}?g.call(a,h.val()):"img"===r?g.call(a,h.attr("src")):g.call(a,h.html()))};h.change(n),s[y]&&s[y].push(n)}})}});const g=this;if(d(this,a),r&&"function"==typeof a.on){const e="_jShowHideCls";if(s._jShowHideCls){const a=s[e][0];a&&a.off(s[e][1])}const t=a.on(function(e,t){2===arguments.length&&"remove"===t||d(g,a)});s._jShowHideCls=[a,t]}n.customRenderer&&"function"==typeof n.customRenderer&&n.customRenderer(a,o),t.DEV_MODE&&(o._jiantPropagationInfo={modelName:a?a.jModelName:"",data:a,subscribe4updates:r,reverseBinding:p,mapping:l,trace:t.getStackTrace()})};o.propagate=s,o.unpropagate=function(){e.each(i,function(e,a){const t="_j"+e;if(s[t]){const e=s[t][0];e&&e.off(s[t][1]),s[t][2]&&a.off&&a.off("change",s[t][2])}}),t.DEV_MODE&&delete o._jiantPropagationInfo}},isServiceName:u,isFlagPresent:function(e,a){if(!Array.isArray(e))return!1;let t=!1;return e.some(function(e){if(e===a)return t=!0,!0}),t},scanForSpec:i,getComponentType:d}});jiant.module("jiant-uifactory",function(){return this.singleton(),{ensureExists:function(e,a,t,n,o,i){return n&&a&&(0<=a.indexOf(n)||e&&0<=a.indexOf(n.substring(e.length)))?"":t&&t.length?"":i?(jiant.DEV_MODE&&jiant.infop("optional element .!! not present under #!!, skipping, all is ok",o,n),""):(o?jiant.errorp("non existing object referred by class under object id #!!, check stack trace for details, expected obj class: .!!",n,o):jiant.errorp("non existing object referred by id, check stack trace for details, expected obj id: #!!",n),o?",    #"+n+" ."+o:", #"+n)},viewComponent:function(e,a,t,n,o,i){const s="."+t+n;if("after-class"===i){const a=e.find(s);return a[0]?a:e.find(n)}if("before-class"===i){const a=e.find(n);return a[0]?a:e.find(s)}return i?e.find(n):e.find(s)},view:function(e,a,t,n){const o="#"+e+a;if(t.impl)return $(t.impl);if("after-class"===n){const e=$(o);return e[0]?e:$(a)}if("before-class"===n){const e=$(a);return e[0]?e:$(o)}return n?$(a):$(o)}}});jiant.module("jiant-util",["jiant-log"],function(){function e(e){const a=+e;return 0==a&&0!==e&&"0"!==e||isNaN(a)?null:new Date(a)}function a(e){return e=""+e,0===e.length?"00":1===e.length?"0"+e:e}function t(e,a){const t=new Date().getTime(),n=t-r;return a=a||-1,r&&n>=a&&jiant.info((e?e:"jiant.pick:")+" "+n+"ms"),r=t,n>=a?n:0}function n(e){return $.each(e.find("*"),function(e,a){$.each(a.attributes,function(e,t){0>t.value.indexOf(" ")&&0<=t.value.indexOf("!!")&&$(a).attr(t.name,t.value.replace(/!!/g,"e2013e03e11eee "))})}),$(e).html().trim().replace(/!!/g,"!! ").replace(/e2013e03e11eee /g,"!! ")}function o(e,a,t,o){a=a||{},o&&(a=$.extend({},a),$.each(o,function(e,t){a[e]=a[t]}));let i="";try{let o=t?s[t]:null;if(!o){let a=("string"==typeof e?$("<i></i>").html(e):$(e)).html().trim();a=jiant.isMSIE?n($(e)):a.replace(/!!/g,"!! ");const i="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/!! (.+?)!! /g,"', typeof $1 === 'undefined' ? '' : typeof $1 === 'function' ? $1() : $1,'").split("!?").join("');").split("?!").join("p.push('")+"');}return p.join('');";o=new Function("obj",i),s[t]=o}return o(a).trim()}catch(a){i=a.message,jiant.logError("Error parse template: "+t,o,a)}return"!!! ERROR: "+i.toString()+" !!!"}function i(e){let a=e.toString();return a=a.slice(a.indexOf("(")+1,a.indexOf(")")).match(/([^\s,]+)/g),a?a:[]}this.singleton();const s={};let r;const p={parseTemplate:function(e,a){return $(o(e,a))},parseTemplate2Text:function(e,a,t){return o(e,a,t)},_parseTemplate:o,getFunctionParamNames:i,isNumberString:function(e){return parseInt(e)+""===e},getParamNames:i,getURLParameter:function(e){const a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null===a?null:decodeURIComponent(a[1])},pick:t,formatDate:function(t){const n=e(t);return null==n?"":a(n.getFullYear())+"-"+a(n.getMonth()+1)+"-"+a(n.getDate())},formatDateUsa:function(t){const n=e(t);return null==n?"":a(n.getMonth()+1)+"/"+a(n.getDate())+"/"+a(n.getFullYear())},formatMoney:function(e,a,t,n){let o,i,s;if(a=void 0===a?",":a,t=void 0===t?".":t,e=e.toString().replace(/\s+/g,""),i="undefined"==typeof n||0===n?Math.round(parseFloat(e)):i=e.split("."),isNaN(i)&&!i[0])return"";i[1]?(i[1]=Math.round(i[1]).toString().substring(0,n),s=""+i[0]):s=""+i;for(let o=s.length;0<o;o-=3)s=s.substring(0,o)+(o<s.length?".":"")+s.substring(o);return s=s.split("."),o=s.join(a),isNaN(i[1])||(o+=t+i[1]),o},formatTime:function(t){const n=e(t);return null==n?"":a(n.getHours())+":"+a(n.getMinutes())},formatTimeSeconds:function(t){const n=e(t);return null==n?"":a(n.getHours())+":"+a(n.getMinutes())+":"+a(n.getSeconds())},randomIntBetween:function(e,a){return Math.floor(Math.random()*(a-e+1)+e)},copy2clipboard:function(e){if(document.execCommand){const a=document.createElement("input");a.type="text",a.style.opacity="0",a.style.position="absolute",a.style.zIndex="-1",a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}},asObjArray:function(e,a,t){const n=[];return e.forEach(function(e,o){const i={};i[a]=e,t&&(i[t]=o),n.push(i)}),n},check:function(e,a){if(!e){const e=[...arguments];e.splice(0,1),jiant.logError(e),jiant.DEV_MODE&&alert(a)}},lfill:a,isEmptyFunction:function(e){const a=(""+e).replace(/\s/g,"");return a.indexOf("{}")===a.length-2},isWebComponentName:function(e){return e.includes("-")}};for(let e in p)jiant[e]=p[e];return p});jiant.module("jiant-views",["jiant-uifactory","jiant-ui","jiant-comp","jiant-fields"],function(e,a,t,n,o,i,s,r){function p(a,n,p,l,d){const c={};n._j={},n._jiantSpec=c,e.each(n,function(e,h){const g=i.getComponentType(h);if(c[e]=h,e in{appPrefix:1,impl:1,compCbSet:1,_jiantSpec:1,_scan:1,jInit:1,_j:1,customRenderer:1});else if(g===t.lookup)t.logInfo("    loookup element, no checks/bindings: "+e),t.setupLookup(n,e,l,d);else if(g===t.meta);else if(g===t.data)r.setupDataFunction(n,n,e,t.getAt(h,1),t.getAt(h,2)),n[e].customRenderer=function(a,t,o){n[e](o)};else if(g===t.cssMarker||g===t.cssFlag)r.setupCssFlagsMarkers(n,e,g,t.getAt(h,1),t.getAt(h,2));else if(g===t.fn)n[e]=h[1];else{const c=m.viewComponent(l,p,d,e,g,a.bindByTag);if(u+=o.ensureExists(d,a.dirtyList,c,d+p,d+e,i.isFlagPresent(h,t.optional)),n[e]=c,r.setupExtras(a,c,g,p,e,n,d),g===t.comp){const o=t.getAt(h,1);n[e].customRenderer=s.getCompRenderer(a,o,e,h),i.isFlagPresent(h,t.optional)||t.onApp(a,function(){n[e].customRenderer({},n[e],void 0,!1,n,{})}),o in a.templates||t.error("jiant.comp element refers to non-existing template name: "+o+", view.elem: "+p+"."+e)}n[e]._j={parent:n}}})}function l(a,n){e.each(a,function(e){n[e]&&(t.info("unsafe extension: "+e+" already defined in base jQuery, shouldn't be used, now overriding!"),n[e]=void 0)})}function d(a,n,o){m=o,u="",e.each(n,function(e,t){c(a,e,t,null,[u])}),t.DEV_MODE&&0<u.length&&alert("Some views not bound to HTML properly, check console "+u)}function c(a,t,n,s,r){const d="appPrefix"in n?n.appPrefix:a.appPrefix;if(s=s||o.view(d,t,n,a.bindByTag),"_scan"in n&&i.scanForSpec(d,n,view),n._jiantSpec){const o=n._jiantSpec;for(let e of n)delete n[e];t in a.views&&(a.views[t]=n),e.each(o,function(e,a){n[e]=a})}const c=o.ensureExists(d,a.dirtyList,s,d+t);return 0===c.length?p(a,n,t,s,d):r[0]+=c,l(n,s),i.makePropagationFunction(t,n,n),e.extend(n,s),n.jInit&&"function"==typeof n.jInit&&n.jInit.call(n,a),n}this.singleton();let m,u;return t.bindView=c,{apply:function(e,a){d(e,a.views,o)}}});jiant.module("jiant-ajax",function(){function e(e,a,t){let n=jiant.getParamNames(a);n&&0<n.length?n.splice(n.length-1,1):n=[];const o=s(t,t.ajaxPrefix,t.ajaxSuffix,e,n,"function"==typeof a?a():void 0,t.crossDomain);return o._jiantSpec=a,o._jiantSpecName=e,o}function a(a,t){$.each(t,function(n,o){t[n]=e(n,o,a)})}function t(e,a,n,o){if(null!==a)if($.isArray(n)||n&&n.jCollection){let o=!1;n.forEach(function(e){return o=o||$.isPlainObject(e)||e&&e.jModelName,o}),n.forEach(function(n,s){t(e,a+(o?"["+s+"]":""),n,!0)})}else $.isPlainObject(n)||n&&n.jModelName?$.each(n,function(i,s){if(i!==jiant.flags.ajaxSubmitAsMap){const r=n[jiant.flags.ajaxSubmitAsMap]?(o?a+"[":"")+i+(o?"]":""):(o?a+".":"")+i;"isModel"in jiant&&jiant.isModel(n)?(jiant.isModelAccessor(s)||jiant.isModelSupplier(s))&&!jiant.isTransient(s)&&t(e,r,s.apply(n),!0):t(e,r,s,!0)}}):a in e?e[a]&&e[a].jParsed?e[a].push(n):(e[a]=[e[a],n],e[a].jParsed=1):e[a]=n}function n(e){return e=e.substring(1),e.endsWith("/")?e.substring(0,e.length-1):e}function o(e,a){return e.replace(r,function(e){const t=e.length;return e=n(e),(e in a?a[e]:":"+e)+(2<=t-e.length?"/":"")})}function i(e){let a=e.match(r)||[];return a.forEach(function(e,t){a[t]=n(e)}),jiant.isNumberString(a[0])&&(a=a.slice(1,a.length)),a}function s(e,a,n,s,r,p,l){let d,c=a||""===a?a:jiant.AJAX_PREFIX,m=n||""===n?n:jiant.AJAX_SUFFIX,u=p&&"string"!=typeof p?p:{},h={};return u.url=u.url||("string"==typeof p?p:s+m),c.endsWith("/")&&u.url.startsWith("/")&&(u.url=u.url.substring(1)),u.url.startsWith("http://")||u.url.startsWith("https://")||(u.url=c+(u.url.startsWith("/")||c.endsWith("/")||0===c.length||!u.url.startsWith("/")&&!c.endsWith("/")?"":"/")+u.url),d=i(u.url),"paramMapping"in u||(u.paramMapping={}),"headers"in u||(u.headers={}),function(){let a,n,i={},s=arguments,p=u.url,c=new Date().getTime();"function"==typeof s[s.length-2]?(a=s[s.length-2],n=s[s.length-1]):"function"==typeof s[s.length-1]&&(a=s[s.length-1]),r.forEach(function(e,a){if(a<s.length&&"function"!=typeof s[a]&&void 0!==s[a]&&null!==s[a]){const n=s[a],o=u.paramMapping[e]||e;e in u.headers?h[u.headers[e]]=n:t(i,o,n)}}),u.method&&"get"!==u.method.toLowerCase()||i.antiCache3721||(i.antiCache3721=new Date().getTime());const m={};d.forEach(function(e){const a=u.paramMapping[e]||e;a in i&&(m[a]=i[a],delete i[a])}),p=o(p,m);const g={data:i,traditional:!0,method:u.method,headers:h,success:function(e){if(a){try{e=$.parseJSON(e)}catch(e){}a(e)}},error:function(a){0===a.status&&("abort"===a.statusText||"error"===a.statusText)||(n?n(a.responseText):e.handleErrorFn?e.handleErrorFn(a.responseText):jiant.handleErrorFn(a.responseText))}};return l&&(g.contentType="application/json",g.dataType="jsonp",g.xhrFields={withCredentials:!0},g.crossDomain=!0),$.ajax(p,g)}}this.singleton();const r=/:([^\/]+)(\/|$)/g;return jiant.bindAjax=e,jiant.handleErrorFn=function(e){jiant.logError(e)},jiant.getDeclaredName=function(e){return e?e._jiantSpecName:void 0},jiant.flags.ajaxSubmitAsMap="_jiantFlagSubmitAsMap",{apply:function(e,t){a(e,t.ajax)}}});jiant.module("jiant-comp",["jiant-ui"],function(e,a,t,n,o){return this.singleton(),{getCompRenderer:function(a,n,s,r){return function(i,p,l,d,c,m){let u,h=m.mapping||{},g=s in h?i[h[s]]:s in i?i[s]:i,f=!o.isFlagPresent(r,t.optional);if(i===g&&!f)return;"function"==typeof g&&(g=g.apply(i));const y=Array.isArray(g)?g:[g];f||p.empty();const j=a.templates[n].compCbSet;j&&j.start&&"function"==typeof j.start&&j.start.apply(),y.forEach(function(o,l){if(o){const i=t.getAt(r,2);i&&(o=e.extend({},o,i)),"object"!=typeof o||"index"in o||(o.index=l);const d=e.isPlainObject(h[s])?h[s]:h;f&&"propagate"in c[s]?c[s].propagate(o,m.subscribeForUpdates,m.reverseBind,d):(u=a.templates[n].parseTemplate(o,m.subscribeForUpdates,m.reverseBind,d),e.each(a.templates[n]._jiantSpec,function(e){c[s][e]="function"==typeof u[e]?u[e].bind(u):u[e]}),c[s].propagate=function(){u.propagate.apply(u,arguments)},p.append(u)),j&&"perItem"in j&&"function"==typeof j.perItem&&j.perItem.apply(o,u)}}),j&&"end"in j&&"function"==typeof j.end&&j.end.apply()}}}});jiant.module("jiant-dev",function(){function e(e){jiant.loadModule(e,"jiant-load",function(){jiant.loadLibs(["https://rawgit.com/vecnas/jiant/master/arbor.js"],function(){jiant.loadLibs(["https://rawgit.com/vecnas/jiant/master/arbor-tween.js"],function(){jiant.loadLibs(["https://rawgit.com/vecnas/jiant/master/graph.js"],function(){e||$.each(jiant.getApps(),function(a){return e=a,!1}),jiant.onApp(e,["jiantVisualizer"],function(e,a){a.logic.jiantVisualizer.visualize(e,a)})},!0)})})})}return this.singleton(),jiant.visualize=e,{visualize:e}});jiant.module("jiant-events",function(){function e(e,t){$.each(t,function(e,t){a(t)})}function a(e){const a=$({});return e.listenersCount=0,e.fire=function(){a.trigger("e.event",arguments)},e.on=function(t){e.listenersCount++;const n=function(){const e=[...arguments];e.splice(0,1),t&&t.apply(t,e)};return a.on("e.event",n),n},e.once=function(a){const t=e.on(function(){e.off(t),a.apply(a,arguments)})},e.off=function(t){return jiant.DEV_MODE&&(0===arguments.length||!t)&&jiant.logInfo("Event.off called without handler, unsubscribing all event handlers, check code if it is unintentionally",jiant.getStackTrace()),e.listenersCount--,a.off("e.event",t)},e}return this.singleton(),jiant.bindEvent=a,{apply:function(a,t){e(a,t.events)}}});jiant.module("jiant-fields",[],function(e,a,t){function n(e,a,t){t&&(e.jMapping=e.jMapping||[],e.jMapping[t]=e.jMapping[t]||[],e.jMapping[t].push(a),e.jMapped=e.jMapped||{},e.jMapped[a]=e.jMapped[a]||[],e.jMapped[a].push(t))}function o(a){function n(n,o,i){const s=e(t.parseTemplate(e("<b><li class='!!ctlClass!!' style='cursor: pointer;'><a>!!label!!</a></li></b>"),{label:-1===o?"...":o,ctlClass:i}));return n.append(s),-1!==o&&s.click(function(){p=o,a.refreshPage()}),s}const o=e({}),s=[];let r,p=0;e.each(a,function(a,t){const n=e("<ul></ul>");n.addClass("pagination"),e(t).append(n),s.push(n)}),a.onValueChange=function(e){o.on("ValueChange",e)},a.refreshPage=function(){o.trigger("ValueChange",p)},a.val=function(){return 0===arguments.length?p:void(p=parseInt(arguments[0]),a.refreshPage())},a.updatePager=function(a){e.each(s,function(e,o){o.empty(),r&&o.removeClass(r),r="totalPages_"+a.totalPages,o.addClass(r);const s=Math.max(0,a.number-Math.round(t.PAGER_RADIUS/2)),p=Math.min(a.number+Math.round(t.PAGER_RADIUS/2),a.totalPages);0<s&&(n(o,1,"pager_first"),n(o,-1,"disabled emptyPlaceholder"));for(let t,r=s;r<p;r++)t="",r===a.number&&(t+=" active"),n(o,r+1,t);let i="";p<a.totalPages-1&&(n(o,-1,"disabled emptyPlaceholder"),i="pager_last"),p<a.totalPages&&n(o,a.totalPages,i)})}}function i(a){function t(){r=Math.max(r,0),r=Math.min(r,i.children().length-1),n.css("visibility",0<r?"visible":"hidden"),o.css("visibility",r<i.children().length-s?"visible":"hidden"),e.each(i.children(),function(a,t){let n=e(t);a>=r&&a<r+s?n.show():n.hide()})}let n=e("<div>&laquo;</div>"),o=e("<div>&raquo;</div>"),i=e("<div></div>"),s=8,r=0;n.addClass("paged-prev"),o.addClass("paged-next"),i.addClass("paged-container"),a.empty(),a.append(n),a.append(i),a.append(o),n.click(function(){r-=s,t()}),o.click(function(){r+=s,t()}),a.append=function(e){i.append(e),t()},a.empty=function(){i.empty(),t()},a.setHorizontal=function(e){const a=e?"inline-block":"block";n.css("display",a),o.css("display",a),i.css("display",a)},a.setPageSize=function(e){s=e,t()},a.setHorizontal(!0)}function s(e){e.reload=function(e){e=e||this.attr("src"),e=-1<e.indexOf("?")?e:e+"?";const a="&_="+new Date().getTime();e=-1<e.indexOf("&_=")?e.replace(/&_=[0-9]{13}/,a):e+a,this.attr("src",e)}}function r(e,a){a.click(function(){e.hide()})}function p(e,a){a.click(function(){window.history.back()})}function l(e,a){a.click(function(){t.goRoot(e)})}function d(e,a,t,n){const o=n.endsWith("Ctl")?n.substring(0,n.length-3):n;a.click(function(){t.states[o].go()})}function c(e,a,t){return e=isNaN(a)?e:parseFloat(e)<a?a:e,e=isNaN(t)?e:parseFloat(e)>t?t:e,""+e}function m(e){e.keydown(function(a){if(a.keyCode===t.key.down&&0<e.val())return e.val(c(e.valInt()-1,e.j_valMin,e.j_valMax)),e.trigger("change"),!1;if(a.keyCode===t.key.up)return e.val(c(e.valInt()+1,e.j_valMin,e.j_valMax)),e.trigger("change"),!1;if(a.keyCode===t.key.end||a.keyCode===t.key.home||a.keyCode===t.key.tab||a.keyCode===t.key.enter)e.val(c(e.valInt(),e.j_valMin,e.j_valMax));else if(!a.ctrlKey&&!a.shiftKey&&(a.keyCode!==t.key.backspace&&a.keyCode!==t.key.del&&a.keyCode!==t.key.left&&a.keyCode!==t.key.right&&48>a.keyCode||57<a.keyCode)&&(96>a.keyCode||105<a.keyCode))return a.preventDefault(),!1;return!0}),e.valInt=function(){const a=parseInt(e.val());return isNaN(a)?0:a},e.setMax=function(a){e.j_valMax=a,e.attr("max",a),e.val(c(e.valInt(),e.j_valMin,e.j_valMax))},e.setMin=function(a){e.j_valMin=a,e.attr("min",a),e.val(c(e.valInt(),e.j_valMin,e.j_valMax))}}function u(e){e.keydown(function(a){if(a.keyCode===t.key.down&&0<e.val())return e.val(c(e.valFloat()-1,e.j_valMin,e.j_valMax)),e.trigger("change"),!1;if(a.keyCode===t.key.up)return e.val(c(e.valFloat()+1,e.j_valMin,e.j_valMax)),e.trigger("change"),!1;if(a.keyCode===t.key.dot||a.keyCode===t.key.dotExtra)return 0>e.val().indexOf(".")&&0<e.val().length;if(a.keyCode===t.key.end||a.keyCode===t.key.home||a.keyCode===t.key.tab||a.keyCode===t.key.enter)e.val(c(e.valFloat(),e.j_valMin,e.j_valMax));else if(!a.ctrlKey&&!a.shiftKey&&(a.keyCode!==t.key.backspace&&a.keyCode!==t.key.del&&a.keyCode!==t.key.left&&a.keyCode!==t.key.right&&48>a.keyCode||57<a.keyCode)&&(96>a.keyCode||105<a.keyCode))return a.preventDefault(),!1;return!0}),e.valFloat=function(){const a=parseFloat(e.val());return isNaN(a)?0:a},e.setMax=function(a){e.j_valMax=a,e.attr("max",a),e.val(c(e.valFloat(),e.j_valMin,e.j_valMax))},e.setMin=function(a){e.j_valMin=a,e.attr("min",a),e.val(c(e.valFloat(),e.j_valMin,e.j_valMax))}}function h(a,n,o,i){if(n[0]){const s=n[0].tagName.toLowerCase();"form"!==s&&(t.logError(o+"."+i+" form element assigned to non-form: "+s),t.DEV_MODE&&alert(o+"."+i+" form element assigned to non-form: "+s)),n.submitForm=function(o,i){o=o?o:n.attr("action"),o=isCouldBePrefixed(o)?(a.ajaxPrefix?a.ajaxPrefix:t.AJAX_PREFIX?t.AJAX_PREFIX:"")+o:o,o=isCouldBePrefixed(o)?o+(a.ajaxSuffix?a.ajaxSuffix:t.AJAX_SUFFIX?t.AJAX_SUFFIX:""):o;const s={type:"POST",url:o,data:n.serialize(),success:i,error:function(e){a.handleErrorFn?a.handleErrorFn(e.responseText):t.handleErrorFn(e.responseText)}};return a.crossDomain&&(s.contentType="application/json",s.dataType="jsonp",s.xhrFields={withCredentials:!0},s.crossDomain=!0),e.ajax(s)}}}function g(e,a){const n=a.html;a.html=function(o){const i=parseInt(o);isNaN(i)||o+""!=i+""?n.call(a,o):n.call(a,t.formatMoney(i,e.formatGroupsDelim||void 0))},a.addClass("nowrap")}function f(e,a){t.loadModule(e,"jiant-intl",function(){t.intlProxy(e,a,"html"),t.intlProxy(e,a,"text")})}function y(a,n,c,b,_,x,I){if(c===t.tabs&&n.tabs)n.tabs(),n.refreshTabs=function(){n.tabs("refresh")};else if(c===t.ctlHide)r(x,n);else if(c===t.et.ctl2state)d(x,n,a,_);else if(c===t.et.ctlBack)p(x,n);else if(c===t.et.ctl2root)l(a,n);else if(c===t.inputInt)m(n);else if(c===t.inputFloat)u(n);else if(c===t.inputDate&&n.datepicker){const e=a.dateFormat?n.datepicker({format:a.dateFormat}):n.datepicker();e.on("changeDate",function(){n.trigger("change")})}else c===t.pager?o(n):c===t.form?h(a,n,b,_):c===t.containerPaged?i(n):c===t.image?s(n):c===t.nlabel?f(a,n):c===t.numLabel?g(a,n):j[c]?j[c](n,x,a):Array.isArray(c)&&e.each(c,function(e,t){y(a,n,t,b,_,x,I)})}this.singleton();const j={},b={registerCustomType:function(e,a){"string"==typeof e||e instanceof String||alert("Custom type name should be string"),j[e]=a}};for(let n in b)t[n]=b[n];return{getAutoType:function(e,a){switch(e.tagName.toUpperCase()){case"INPUT":return t.input;case"IMG":return t.image;case"FORM":return t.form;case"BUTTON":return t.ctl;case"A":return t.href;default:const n=a.toLowerCase();if(0<=n.indexOf("container"))return t.container;return 0<=n.indexOf("ctl")?t.ctl:t.label;}},setupExtras:y,setupCssFlagsMarkers:function(a,o,i,s,r){const p=i===t.cssFlag,l="j_prevMarkerClass_"+o;r=r||o,n(a,o,s),a[o]={},a[o].customRenderer=function(a,t,n,o,s){if(s[l]&&e.each(s[l],function(e,a){a&&s.removeClass(a)}),s[l]=[],p){const e=Array.isArray(n)&&0===n.length?void 0:n;!e||(s[l].push(r),s.addClass(r))}else void 0!==n&&null!==n&&(!Array.isArray(n)&&n&&"function"==typeof n.split?n=n.split(","):!Array.isArray(n)&&(n=[n]),e.each(n,function(e,a){const t=r+"_"+a;s[l].push(t),s.addClass(t)}))}},setupDataFunction:function(e,a,t,o,i){n(a,t,o),i=i||t,e[t]=function(a){return 0===arguments.length?e.attr("data-"+i):e.attr("data-"+i,a)}}}});jiant.module("jiant-intl",["jiant-logic"],function(e,a,t,n,o){function i(a,t){if(Array.isArray(t)){const n=[];return e.each(t,function(e,t){n.push(a.logic.intl.t(t))}),n.join(", ")}return a.logic.intl.t(t)}function s(e,a){a&&(e.logic.intl?t.info("Both logic.intl and app.intl declared, skipping app.intl"):e.logic.intl=a)}function r(){return"undefined"!=typeof i18n}function p(){return"undefined"==typeof i18n?i18next:i18n}function l(e,a){return a||""===a?a:(t.error("Not found translation for key: ",e),e)}function d(e,a){a&&(e[a]||t.error("Not found translation for key: ",a))}function c(a,n,o,i){return"t"===a?function(a){let t={};return arguments&&(i?e.each(arguments,function(e,n){0<e&&(t[""+(e-1)]=n)}):t=arguments[1]),d(o,a),p().t(a,t)}:n.empty?function(){const s={};if(arguments)if(i)e.each(arguments,function(e,t){s[""+e]=t});else{const o=t.getParamNames(n);e.each(arguments,function(e,t){0<e&&e<o.length&&(s[o[e]]=t)})}return d(o,a),p().t(a,s)}:n}function m(e,a,t){const n=function(e){return l(e,t[e])};return"t"===e?n:a.empty?function(){return n(e)}:a}return this.singleton(),t.loadIntl=function(a,n){if(t.infop("Loading intl for app !!",n.id),!a.url)return;let o=a.url;if(n.modulesSuffix){const e=0<=a.url.indexOf("?")?"&":"?";o=o+e+n.modulesSuffix}a.t=function(){},a.t.spec=!0,a.t.empty=!0,e.getJSON(o,function(n){function o(){e.each(a,function(e,t){t.spec&&(i[e]=a.i18n?c(e,t,n,a.javaSubst):m(e,t,n))}),a.implement(i),a.debugIntl=function(a){e.each(n,function(e,n){e.startsWith(a)&&t.infop("!! = !!",e,n)})},a.scanDoc&&e("*[data-nlabel]").each(function(t,n){n=e(n);const o=n.attr("data-nlabel"),i=a.t(o);n.html(i)})}const i={},s=a.i18nOptions||{debug:t.DEV_MODE};a.i18n?r()?(s.customLoad=function(e,a,t,o){o(null,n)},a.javaSubst&&(s.interpolationPrefix="{",s.interpolationSuffix="}"),i18n.init(s),o()):(s.interpolation=a.javaSubst?{prefix:"{",suffix:"}"}:s.interpolation||{prefix:a.prefix||"__",suffix:a.suffix||"__"},i18next.use({type:"backend",init:function(){},read:function(e,a,t){t(null,n)}}).init(s,o)):o()})},t.intlProxy=function(e,a,n){if(!e.logic.intl)return void t.error("nlabel used, but no intl declared, degrading nlabel to label");const s=a[n];a[n]=function(n){if(void 0===n||null===n)return s.call(a,n);if(o.isLogicLoaded(e.id,"intl"))s.call(a,i(e,n));else{s.call(a,n);t.getStackTrace();t.onApp(e,["intl"],function(){s.call(a,i(e,n))})}}},{apply:function(e,a){s(e,a.intl,e.id)}}});jiant.module("jiant-load",function(){function e(e,a){const t=[];Array.isArray(e)||(e=[e]),$.each(e,function(e,a){const n="ext"+new Date().getTime()+Math.random();t.push(n),jiant.declare(n,a)});const n="app"+new Date().getTime()+Math.random();jiant.onApp(n,t,function(e){a(e),jiant.forget(n)}),jiant.app({id:n})}function a(e,a){function t(e){const a=$.Deferred();return-1===navigator.appVersion.indexOf("MSIE")?(o=$("<style>").text("@import \""+e+"\"").attr({"data-uri":e}).appendTo("body"),i=setInterval(function(){try{if(o[0].sheet.cssRules,m===c.length)throw e+" not loaded yet";else{let a,t,n=!1;for(t=c.length-1;0<=t;t--)if(a=c[t].cssRules[0].href,"undefined"!=typeof a&&a===e){n=!0;break}if(!1==n)throw e+" not loaded yet"}a.resolve(),clearInterval(i)}catch(t){l+=d,l>p&&(clearInterval(i),a.reject())}},d)):(n=document.createElement("link"),n.type="text/css",n.rel="stylesheet",n.href=e,n.onload=function(){a.resolve()},document.getElementsByTagName("head")[0].appendChild(n)),a}let n,o,i,s=$.Deferred(),r=[],p=6e4,l=0,d=30,c=document.styleSheets,m=c.length;return Array.isArray(e)||(e=[e]),$.each(e,function(e,a){jiant.info("Start loading CSS: "+a),r.push(t(a))}),"resolved"!==s.state()&&$.when.apply(r).done(function(){s.resolve()}),a?void s.done(a):r}return this.singleton(),jiant.loadLibs=e,jiant.loadCss=a,{loadLibs:e,loadCss:a}});jiant.module("jiant-log",function(){function e(e,a){let t=a[0]+"";$.each(a,function(e,a){if(0<e){const e=t.indexOf("!!");0<=e?t=t.substring(0,e)+a+t.substring(e+2):(t+=" ",t+=a)}}),e(t)}function a(e,a){let t="";$.each(a,function(e,a){t+=a,t+=" "}),e(t)}function t(e,a){s&&(e="error");try{window.console&&window.console[e]&&$.each(a,function(a,t){window.console[e](t)})}catch(n){"info"!==e&&t("info",a)}}function n(){t("error",arguments)}function o(){jiant.DEV_MODE&&t("info",arguments)}function i(){const e={stack:{}};return"captureStackTrace"in Error&&Error.captureStackTrace(e,i),e.stack}this.singleton();let s=!1;const r={logInfo:o,logError:n,info:function(){a(o,arguments)},error:function(){a(n,arguments)},infop:function(){e(o,arguments)},errorp:function(){e(n,arguments)},getStackTrace:i,showTrace:function(){s=!0}};for(let e in r)jiant[e]=r[e];return r});jiant.module("jiant-logic",["jiant-util"],function(e,a,t,n,o){function i(a,n){const o=h[n],i=t.getApps()[a];o&&a in g&&n in g[a]&&i&&(i.logic=i.logic||{},i.logic[n]=i.logic[n]||{},e.each("function"==typeof o?o(e,i):o,function(e,a){i.logic[n][e]=a}),u[a][n]=1)}function s(e,a){h[a]&&g[e][a]&&t.getApps()[e]&&(p(e,a),u[e]&&(u[e][a]=1),d(e))}function r(e,a){return e+"jiant_dependency_resolved_"+a}function p(a,t){if(g[a]&&g[a][t]){const n=g[a][t];delete g[a][t],n&&e.each(n,function(){m.trigger(r(a,t))})}}function l(a,n,i){e.each(n,function(n,s){"function"==typeof s?o.isEmptyFunction(s)&&t.logError("don't declare empty logic functions, use objects for namespace grouping"):(e.each(s,function(e,a){if("function"==typeof a){const i=t.getParamNames(a);o.isEmptyFunction(a)&&(s[e]=function(){t.logError("Logic function app.logics."+n+"."+e+" called before implemented!")},s[e].empty=!0),s[e].params=i,s[e].spec=!0}}),s.implement=function(a){s._jAppId=i,e.each(s,function(e,n){"function"!=typeof n||e in{implement:1,_jAppId:1,_jOverrides:1}||(!e in a?t.logError("Logic function "+e+" is not implemented by declared implementation"):s[e]=a[e])}),s._jOverrides&&s._jOverrides.length&&e.each(s._jOverrides,function(a,n){const o=e.extend(!0,{},s),i=n(e,t.getApps()[s._jAppId],o);e.each(i,function(e,a){s[e]=a})}),u[i]=u[i]||{},u[i][n]=1,p(i,n),d(i)},"intl"===n&&t.loadModule(a,"jiant-intl",function(){t.loadIntl(s,a)}))})}function d(a){let t=0;g[a]&&e.each(g[a],function(){t++})}function c(e,a){return e in u&&a in u[e]}this.singleton();const m=e({}),u={},h={},g={};return t.getAwaitingDepends=function(){return g},t.declare=function(a,n){function o(){const o=new Date().getTime()-p;r&&t.infop("Loaded external library !! in !! ms",n,o),h[a]=r?{}:n,e.each(g,function(e){i(e,a)}),e.each(g,function(e){s(e,a)})}const r="string"==typeof n,p=new Date().getTime();r&&t.infop("Start loading external library !!",n),r?e.ajax({url:n,cache:!0,crossDomain:!0,timeout:500,dataType:"script"}).always(o):o()},t.override=function(a,n){if(a._jAppId){const o=e.extend(!0,{},a),i=n(e,t.getApps()[a._jAppId],o);e.each(i,function(e,t){a[e]=t})}else a._jOverrides=a._jOverrides||[],a._jOverrides.push(n)},t.implement=function(e,a){e.implement(a)},{apply:function(e,a){l(e,a.logic,e.id)},beforeBind:function(a,t,n){g[a]=g[a]||{},u[a]=u[a]||{},t&&e.each(t,function(e,t){t in g[a]||(g[a][t]=[]),!(t in u[a])&&t in h&&(i(a,t),s(a,t)),t in u[a]||g[a][t].push(n)})},isDependResolved:function(a,t){let n=!0;return g[a]&&e.each(g[a],function(e,o){return n=n&&0>o.indexOf(t.depCb),n||m.one(r(a,e),t.callCb),n}),n},afterBind:function(a){u[a]||(u[a]={}),e.each(h,function(e){e in u[a]||(u[a][e]=h[e],i(a,e),p(a,e))}),t.DEV_MODE&&setTimeout(function(){g[a]&&e.each(g[a],function(e,n){if(n&&n.length)return t.errorp("Some logic depends for application "+a+" are not implemented by your code, logic name: ",e),t.logError(g[a]),!1})},5e3)},isLogicLoaded:c}});